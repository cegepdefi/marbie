let Z7KuXzxExYZ7KuXzxExY=null,LhJakDBjGv=null,rC27dP8xq3=!1,aPw3dxk1D1=!1;const EkBCX6yiMZ=!1,AHLd6maG3g=!0,we8me6ghBa=["streamelements","nightbot","kofistreambot","justinfan","justinfan12345"];function f_AHLd6maG3g(){"undefined"!=typeof unityInstance?(LhJakDBjGv="marbieoceano",unityInstance.SendMessage("TwitchIRCAnonimo","ReceiveLog",JSON.stringify({type:"map",message:"4"})),unityInstance.SendMessage("TwitchIRCAnonimo","ReceiveLog",JSON.stringify({type:"channel",message:LhJakDBjGv})),f_TwitchConnectAuto()):setTimeout(f_AHLd6maG3g,1e3)}function GwbU2YHLYv(){const e=new URLSearchParams(window.location.search),n=e.has("map")?e.get("map"):null,t=e.has("channel")?e.get("channel"):null;null!=n&&(EkJPRa6ecS("map:",n),DV3PbpGEQe("map",`${n}`)),null!=t&&(LhJakDBjGv=t,EkJPRa6ecS("channel:",t),DV3PbpGEQe("channel",`${t}`),f_TwitchConnectAuto())}function EkJPRa6ecS(e){0}function DV3PbpGEQe(e,n){if("undefined"!=typeof unityInstance){let t=JSON.stringify({type:e,message:n});unityInstance.SendMessage("TwitchIRCAnonimo","ReceiveLog",t)}else console.warn("unityInstance no disponible."),setTimeout(()=>DV3PbpGEQe(e,n),1e3)}f_AHLd6maG3g(),window.addEventListener("resize",()=>{const e=document.querySelector("#unity-canvas");e.width=window.innerWidth/1.5,e.height=window.innerHeight/1.2});let lastMsn={username:"",message:"message"};function QJfr7Uv6kt(e,n){let t=JSON.stringify({type:"MENSAJE",data:{username:e,message:n}});"undefined"!=typeof unityInstance&&unityInstance.SendMessage("TwitchIRCAnonimo","ReceiveChatMsn",t)}function KxnJH7V4Tq(){Z7KuXzxExYZ7KuXzxExY=new WebSocket("wss://irc-ws.chat.twitch.tv:443"),Z7KuXzxExYZ7KuXzxExY.addEventListener("open",()=>{Z7KuXzxExYZ7KuXzxExY.send("CAP REQ :twitch.tv/membership twitch.tv/tags twitch.tv/commands"),Z7KuXzxExYZ7KuXzxExY.send("PASS SCHMOOPIIE"),Z7KuXzxExYZ7KuXzxExY.send("NICK justinfan12345"),Z7KuXzxExYZ7KuXzxExY.send(`JOIN #${LhJakDBjGv}`),rC27dP8xq3=!0,f_IsrC27dP8xq3JS()}),Z7KuXzxExYZ7KuXzxExY.addEventListener("close",()=>{rC27dP8xq3=!1,0==aPw3dxk1D1?f_IsrC27dP8xq3JS():(EkJPRa6ecS("La conexion con Twitch IRC se cerro, reconectando..."),setTimeout(KxnJH7V4Tq,5e3))}),Z7KuXzxExYZ7KuXzxExY.addEventListener("message",e=>{if(e.data.includes("PING")&&(rC27dP8xq3=!0,Z7KuXzxExYZ7KuXzxExY.send("PONG")),e.data.includes("PRIVMSG")){let n=/:(\w+)!\w+@\w+.tmi.twitch.tv PRIVMSG #\w+ :(.+)/,t=e.data.match(n);if(t){let e=t[1],n=t[2];if(0==we8me6ghBa.includes(e.toLowerCase())){const t=Math.floor(20*Math.random())+1;if(lastMsn.username==e&&lastMsn.message==n)return;lastMsn.username=e,lastMsn.message=n,QJfr7Uv6kt(e,n+" "+t)}}else DV3PbpGEQe("MENSAJE",`Mensaje recibido: ${e.data}`)}else DV3PbpGEQe("GENERAL",e.data)})}function f_DisconnectJS(){Z7KuXzxExYZ7KuXzxExY.close(),Z7KuXzxExYZ7KuXzxExY=null,LhJakDBjGv=null,rC27dP8xq3=!1,aPw3dxk1D1=!1,DV3PbpGEQe("Disconnected","Conexion con Twitch IRC cerrada.")}function f_IsrC27dP8xq3JS(){DV3PbpGEQe("IsConnected",`${rC27dP8xq3}`)}function setTwitchCredentials(e){f_DisconnectJS(),LhJakDBjGv=e,aPw3dxk1D1=!0,EkJPRa6ecS(`js LhJakDBjGv set to: ${LhJakDBjGv}`),KxnJH7V4Tq()}function f_TwitchConnectAuto(){aPw3dxk1D1=!0,KxnJH7V4Tq()}